@model CoursePageModel
@using uLearn;
@{ var slide = Model.Slide as ExerciseSlide; }
<textarea id="secretCodeExercise" class='hide'>@slide.ExerciseInitialCode.EnsureEnoughLines(4)</textarea>
<div class="sphere-engine-tm">Powered by <a target="blank" href="http://sphere-engine.com">Sphere Engine™</a> and <a target="blank" href="http://codemirror.net/">CodeMirror</a></div>
<textarea class='code code-exercise'>@(@Model.LatestAcceptedSolution ?? slide.ExerciseInitialCode.EnsureEnoughLines(4))</textarea>
<script>
	function cleanUserCode() {
		var $secretCodeExercise = $('#secretCodeExercise');
		$('.code-exercise')[0].codeMirrorEditor.setValue($secretCodeExercise.text());
	}
</script>
<div class="solution-control btn-group ctrl-group">
	<button type="button" class="run-solution-button btn btn-primary no-rounds"
			data-url="@Url.Action("RunSolution", new {courseId = Model.CourseId, slideIndex = Model.Slide.Index})">
		RUN
	</button>

	<button type="button" class="btn btn-default reset-btn" onclick="cleanUserCode()">
		RESET
	</button>

	<button id="GetHintButton" type="button" class="btn btn-default hints-btn no-rounds" onclick="showHintForUser('@Model.CourseId','@Model.Slide.Id', '@slide.HintsHtml.Count()')">
		GET HINT
	</button>
</div>
<div class="run-verdict clearfix"></div>
<div class="after-run-block">
	<div class="actual-output">
		<div class="output-label">Вывод вашей программы:</div>
		<pre class="no-rounds"><code class="actual-output-content"></code></pre>
	</div>
	<div class="diff-table"></div>
</div>
@Html.Partial("_ExerciseHints", Model)